Terminator = CR;

error_code = "{00|01|20|21|22|88|99|=?}";

measure = "R0";
setup = "Q0";

measure_mode {
    out $measure; in $measure;
}

mistatch_handler {
    in "ER,%*s,%(\$1\$2)" $error_code;
    measure_mode;
}

setMode {
    out "%{R0|Q0}"; # {Measure Mode|Set-Up Mode}
    in "%{R0|Q0}";
    @init { out "R0"; in "%{Q0|R0}"; }
    @mismatch { mistatch_handler; }
}

getMeasureModeHeadA {
    out "SR,HB,1";
    in "SR,HB,1,%d";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

setMeasureModeHeadA {
    out $setup; in $setup;
    out "SW,HB,1,%d";
    in "SW,HB";
    measure_mode;
    @mismatch { mistatch_handler; }
}

getMeasureModeHeadB {
    out "SR,HB,2";
    in "SR,HB,2,%d";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

setMeasureModeHeadB {
    out $setup; in $setup;
    out "SW,HB,2,%d";
    in "SW,HB";
    measure_mode;
    @mismatch { mistatch_handler; }
}

resetOutput1 {
    out "VR,1";
    in "VR";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

resetOutput2 {
    out "VR,2";
    in "VR";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

getOffsetOutput1 {
    out "SR,OF,1";
    in "SR,OF,1,%f";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

setOffsetOutput1 {
    out $setup; in $setup;
    out "SW,OF,1,%f";
    in "SW,OF";
    measure_mode;
    @mismatch { mistatch_handler; }
}

getOffsetOutput2 {
    out "SR,OF,2";
    in "SR,OF,2,%f";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

setOffsetOutput2 {
    out $setup; in $setup;
    out "SW,OF,2,%f";
    in "SW,OF";
    measure_mode;
    @mismatch { mistatch_handler; }
}

getValueOutput1 {
    out "M1";
    in "M1,%f";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

getValueOutput2 {
    out "M2";
    in "M2,%f";
    @mismatch { mistatch_handler; }
    @replytimeout { measure_mode; }
}

